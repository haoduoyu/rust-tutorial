第三章

复习（TODO 这里应该居中）

先复习一下前面提到的，虽然前面说的比较多，但是在复习的这部分会简单、快速的说明一下

1、安装，从官网找到对应linux、macOS安装使用的代码，如果是windows可以到官网找相应的msi文件安装

```shell
 # 官网复制的，地址是这个https://www.rust-lang.org/zh-CN/tools/install
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

安装后执行`source .bash_profile`可以使得rust相关命令在当前终端即时生效，也可以关闭终端再打开是相同的效果。

2、运行一个Demo

通过创建文件夹，创建文件，然后再文件中输入以下代码

```rust
fn main() {
  println!("Hello World");
}
```

然后rustc编译，然后./可执行文件名 去运行。

也可以通过cargo去创建、编译、执行，会用到以下几个命令

```shell
cargo new hello_world # hello_world 问文件夹名称
cd hello_world
cargo build # 编译代码，这里假设已经在main.rs文件中输入了前面的hello world的代码
cargo run # 运行
```

Over!!!!前一篇的复习就到这里了，接下来新的篇章

----

在这篇文章开始前，先说明几个问题

1、因为我学习的时候是阅读的《Rust权威指南》这本书，章节顺序与我现在、以后将要整理的会略有些区别（其实这篇文章是第三章的内容，因为第二章给了个猜数的小例子，虽然我觉得也很简单，也适合入门，但是还是按照之前的学习习惯，先把基础的内容，或者Demo相关知识点搞定了再回过头来看第二章，其他章节也是）；

2、至于IDE嘛，我现在用的Clion，也可以使用VSCode，这两款都需要安装插件，vscode在后来更新了rust-analyzer这个插件后，提示功能变得比之前更好用一些，至于使用clion还是vscode看个人习惯了，书写代码以及编译运行区别不大，所以后面我主要以我习惯的clion去操作；官方（https://www.rust-lang.org/zh-CN/tools）还提供其他ide的一些简要说明，可以参考。

那下面正式进入这一篇的正文

---

一（TODO 居中）

1、变量

变量的作用，简单来说就是，你想要表示一个数字，一个字符串，一个物体，一件事，在代码中就用一个英文名称去代表，这个英文名称就是变量（因为是外国人创造的rust嘛，所以英文编写和其他语言一样，另外变量深层含义，代表变量啦，存在堆还是栈了，在当前这篇中不是很重要，如果在其他地方看到了，能理解就理解，不能理解就略过，不影响阅读和书写代码），变量需要用有意义的英文单词表示，例如（以下代码不可以运行，只是作为描述变量示例）：

```rust
age = 10 // 代表年龄
name = "zhang san" // 代表姓名，也可以拆开写成last_name、first_name也可以
address = "中国-山东-xxx" // 代表地址
```

上面用age、name、address作为变量名称，如果不是刻意乱写的话（例如name = "中国-山东"）一般是可以“见名知意”，下面提供一下反例，是不好的写法

```rust
a = 10
b = "zhang san"
c = "中国-山东-xxx"
```

上面这个写法虽然对于编译器、计算机来讲和前面的那段代码没有区别，但是。。。人不好阅读，容易混。。（省略n多个坏处），所以，还是为了自己、为了他人，尽量用有意义的名字，规则的话，可以使用字母、数字、下划线，不能以数字开头，和大多数语言一样。

说完变量是什么了，那咱们说一下，在rust里面怎么定义一个变量。

在rust中，变量前面添加一个关键字`let`，就代表了定义了一个变量，例如`let age`、`let name`等，在大多数编程语言中，变量如果想使用就应该先定义，所以我们通过在变量前面增加let关键字之后，就可以在后续的代码中去使用，当然了，根据大多数语言的规则，定义的时候最好能给一个默认值，免得有些可以使用指针的语言会读到指向的内存里一个不确定的值导致代码错误。下面是定义变量的例子：

```rust
// 这里需要注意，下面每一行叫做一条语句，在每一条语句的末尾都要加上分号(;)，
// 后面的学习中我们会看到语句后面不加分号的作用
// 在定义变量的同时赋予一个初始值
let age = 1;
let name = "zhang san";
```

**注：**关键字的意思是。。。只能用于语言本身的英文单词，就是某些单词我们只能拿来用，不可以作为变量名出现，至于有哪些关键字可以通过这个链接（https://doc.rust-lang.org/book/appendix-01-keywords.html）查看，关键字一般不需要记住，因为平时自己起名字的时候和实际生活、业务结合起来，所以也不是那么容易就使用到关键字作为名字的，例如：

```rust
// 这里const、let、fn都是关键字，是不可以被用作变量名的，下面三行会报错
let const;
let let;
let fn;
```

接下来就是比较重要的一段内容了，和后面要讲到的所有权（这里还是不重要，先知道有这个词，有兴趣可以自己查查）多多少少沾点关系。

在其他语言中，如果不想让变量去更改、改变，我们可以这样操作：

```
const float PI = 3.14; // C语言，定义一个名称为a，值为0的常量，这里给了0 之后，后面不允许在改变他
final float PI = 3.14; // JAVA,作用同前面
const PI = 3.14; // javascript，作用同前面
```

上面三个都可以叫做常量，他是不可变的，一旦赋值，直到程序结束（当然有些有作用域说法的可能会出了作用域就被丢弃了），常量的好处就是，根据业务他不可变，防止中途被误改导致一个错误的结果。

在rust中也有一个关键字const去表示一个变量的不可变，不过，如果我们直接写`let age = 10;`他也是不可变的，这是rust区别于其他语言的一点，rust定义变量默认是不可变的，不过需要注意一下，看下面代码：

```rust
// 示例1
let age = 10; // 正确，定义的时候直接赋值

// 示例2
let age;
age = 1; // 这里是允许的，因为let那行没有赋值，这里给他一个
age = 2; // 紧接着这里又赋一个值，就会报错“cannot assign twice to immutable variable `age`”
```

前面提到rust也支持const，作用和其他语言一样，但是const修饰的变量叫常量，let直接修饰的叫不可变量，这里需要区分一下，两者是有一些区别的，在书写方面，const修饰的变量需要全大写（不大写也可以，就是会有警告），let一般首字母小写，用下划线的形式（用驼峰或者首字母大写等会有警告）；const修饰的变量需要添加指定的类型（这个一会说），let在不是很复杂的情况下，都是可以推断出变量类型的，所以用let也可以省掉一部分代码；

既然let变量默认是不可变的，那我应该怎么让他变成可变的呢？这里我们只需要增加一个关键字`mut`，完整的形式是`let mut age`，这里就代表这个age可变，即上面示例2的第三行就会变成正确的写法。

对于变量的可变性，就加了一个mut关键词就没了，也没有过于深入的内容，接下来就看一下数据类型吧。

2、数据类型

数据类型从名字看很好理解，就是这个数据的类型是什么，例如，我们前面写的age、PI就是数字类型（这里不是rust的准确描述），name、address就是字符串类型。根据数学的内容，我们知道数字里面又包含了整数、小数（这里叫浮点数，当然叫小数也没有问题），除了我们常见的字符串类型、数字类型外，还有布尔类型（用这个bool单词表示），布尔类型只有两个对（true）或者错（false），举个例子，怎样标注变量的类型，`let age:i32;  let isSuccess: bool`。

Rust是一门静态类型语言，所以在编译过程中就需要知道变量的具体类型，知道具体类型有什么好处呢？因为毕竟是代码嘛，计算机程序嘛，就得让计算机去运行它，运行的时候又得用cpu、又得用内存、硬盘等等，那知道了类型之后，就可以知道这个数据在内存中，或者在硬盘中占用多大的空间，这里占用的空间大小用字节(byte)表示，能够确定数据大小，就可以在运行时候在内存中找到合适大小的区域去使用；

既然前面提到了，要知道数据类型，以及占用的内存大小，那这里就需要稍微细一点的说明。有时候我们想使用一个整数，但是实际他的范围可能只有-128到127，那这个时候我们可以使用i8来代表，假如这个时候我们数据只有非负数部分，那我们就可以使用u8来代表，前面的u代表无符号，完整的应该是uint8，表示无符号8位整数；如果想表示的数据再大一点，可以使用i16或者u16，只需要保证后面数字是2的n次方倍就好，例如i32、u32、i64、u64等，好像默认最大到128位，这就已经可以表示很大的数了。除了前面说，字母后面跟具体数据外，还可以使用isize（没写错，就是size），这里的isize和usize是和平台有关的，运行在64位平台就是64，运行在32位平台就是32；

说完整数，那浮点数就好说了，与整数一样，后面数字可以按照规律变化，前面字母换成f即可，例如f64、f32等，内置的浮点数从32开始；

布尔类型，就很简单，真、假，取值只有true、false两种。

接下来稍微复杂点的，字符串类型（字符类型也放一起吧），字符类型（char），占用4个字节，因为是用unicode编码的（这里对这个编码不做解释，就是一个编码方式，可以自己了解一下），字符串类型我们可以使用String表示，这里赋值给字符串变量有点特别，不可以使用`let str: String = "123"`需要用这种方式`let a: String = String::from("123");`，如果直接写`let str = "123"`也是合法的，但是他不是字符串类型了，它叫做字符串切片，这个后面会在“所有权”这块知识点出现，这里只需要知道，并且会写字符串定义、赋值方式就可以。

以上呢整数、浮点数、字符串、字符、bool都是标量类型，就是单个值类型的总称（这里不明白可以先看后面复合类型，回过头来就知道单个值是什么意思了）

复合类型

将多个不同类型（可以相同类型）的值组合为一个类型，符合类型包括元组（tuple）、数组（array）

元组类型，他的写法是一个小括号，里面包含了需要定义的类型列表，例如`let tup: (i32, f64, u8) = (500, 6.4, 1)`，这里如果想要访问500、6.4、1这几个值，可以使用这种方式tup.0、tup.1、tup.2，是按照前面定义的顺序获取的，如果`let tup = (500, 6.4, 1)`他会自己推断为元组类型，但是类型列表可能和前面的不同。

数组类型，和元组不一样的地方是，元组里的类型一样、不一样都可以，数组必须一样，数组是一组相同类型的数据组合，所以。。必须一样。然后写法的话，和元组区分开，元组用小括号，数组用中括号，例如`let arr = [1, 2, 3, 4, 5]`，访问、获取数组中的元素的话，可以使用和元组类似的下标的方式，不过这里不用点，而是用中括号，例如我想取数字1，那这我可以写成arr[0]（计算机内的数除非特殊情况，否则默认都是0位起始），访问数字4，可以用arr[3]；除了前面的那种写法外，我们可以指定数组内数据类型以及数量，例如`let arr:[i32; 5] = [1, 2, 3, 4, 5]`，这里需要注意一点，掐面中括号里的5代表元素个数，右边中括号中要提供与之数量对应的元素。我们前面定义了五个元素，如果使用下标方式去请求第六个元素，如`arr[5]`这里就会报错，因为只有五个数据，下标为[0,4]的范围。

这部分到这里有点多了，那就拆分开，不继续写了，前面话很多，但是都是围绕着变量展开的，这部分是基础，整个rust的语言基础，后面还会继续讲到函数类型，if-else、循环等控制流，代码会比普通文字要多一些，敬请期待。

那基本的内容就这些，后面补充一个遗忘的知识点“隐藏”，什么是隐藏呢，看一下下面的代码

```rust
// main我就省略了
let x = 5;
let x = x + 1;
let x = x * 2;

println!("x is {}", x);
```

第二个let隐藏了第一个let的x，第三个隐藏了第二个，从表象看，他实现了x的可修改性（加了mut关键字），实际上两个是不同的实现方式，他最终那还是一个不可变的，前面的可以认为被后面的覆盖了，所以没了，隐藏了，这里其他的我没有深入研究过，有兴趣小伙伴可以自行查阅资料（其实我觉得特性不错，但是实际应用中根据具体情况使用），这里还有一个神奇的用法

```rust
let s = "aaa";
let s = 1;
```

这段代码是正确的，可以通过这种方式改变数据类型，ok(#^.^#)，就到这了，后面的内容会尽快整理分享出来。

最后，如果看到了，有兴趣学习rust，可以仔细阅读，如果有错误的、不准确的欢迎指正。

本篇告辞~