第三章

老规矩，先复习一下上一篇的内容

变量是什么东西，能干什么？能储存计算结果或能表示值的抽象概念，变量可以通过变量名访问，那这时候我们就应该给变量取一个合适的变量名了，例如表示年龄用age，表示姓名用name、lastName、fistName等，用一个有意义的单词表示变量（用拼音也行，不过基本都有网，想到什么汉语的名字，随手找个翻译工具翻译一下挺好）。

说完变量，那他应该带有类型，例如有符号整型变量i32、i64；无符号整型将前面的 i 改成 u ，例如 u32、u128等；除了整型变量外，还有浮点型，也就是小数类型的，例如 f32、f64等，除了前面提到的整数、浮点数这种数值型的类型外，还有表示真假的布尔类型，用bool表示，可以取true 或 false两个值；还有字符串类型、字符类型。

以上几个类型都属于标量类型，除了标量类型外，还有复合类型，例如元组类型，用小括号表示`let tuple:(u32, i64) = (2, 4)`；数组类型，用中括号表示`let arr: [i32; 10]`

----

复习的内容就上面这些吧，其他的有遗漏的可以单独查看前一篇文章。

----

**函数**

函数在Rust中有着广泛的应用，前面我们已经见过最重要的一个函数main了，他是大部分程序开始的地方，让我们回忆一下main函数的写法

```rust
fn main() {
}
```

1、fn 关键字

2、main 函数名称

3、圆（小）括号  主要可以放一些变量做参数，这里暂时为空

4、花（大）括号 函数体，可以放一些自定义的代码内容

接下来给一个函数通用的定义模板

```rust
fn methodName(args...) -> returnType { body; return value; }
```

函数需要由fn开头；紧跟着函数名称，这里可以自定义任何合法的字符（不能使用关键字作为函数名）；然后后面圆（小）括号，里面跟着自己需要定义的参数，例如 `(name: String, age: u8)`，参数列表可以由多个参数组成，中间用逗号隔开；在后面是返回类型，这里可以是任何类型，包括前面讲到的数值类型、字符串、字符、元组等，也可以是后面还没有讲到的结构体、枚举类型等，总之，这里的返回类型可以使用任意的、合法的类型；再后面就是一个花（大）括号，里面写一些Rust的代码，如果前面定义了返回类型`returnType`，那么这里就需要使用return返回一个值，这个值需要符合returnType所定义的类型，也可以返回变量，也可以不使用return关键字返回，这个后面示例的时候会说到。

Rust使用蛇形命名法（snake case）来作为函数、变量名的命名风格，例如`one_person`、`another_function()`等，蛇形命名法只使用小写的字母（包括数字）来命名，并以下划线隔开单词。

我们使用函数名加圆（小）括号，以及所需的参数来调用函数，这里不像C早期的一些标准，需要在调用之前声明函数，即在C中，如果想在第n行调用一个函数，例如函数名叫`func`,那么在调用前，也就是第1 到 n-1 行内一定要声明一下，否则会提示未定义函数，而rust就不需要担心这个问题，你可以定义在调用函数的前后任意位置。

```rust
// 定义一个无参函数
fn first_func() {
  // do something
}

fn main() {
   // 调用第一个函数
  first_func();
  
  // 虽然这个函数定义在main之后，但是依旧可以正常调用
  // 这里解读一下下面这行代码
  // 首先调用这个函数，并且传递一个参数3给他
  // 因为函数会有返回值，所以我们这里定义一个变量接收函数的返回值，因为rust可以推断
  // 变量的类型，所以这里可以不加i32这个类型，不过初学者建议在这里增加一下
	let get_num: i32 = second_func(3); 
}

// 定义一个带参数、带返回值的函数
fn second_func(num: i32) -> i32 {
  // do something
  return num;
}

// 等价 second_func 的写法
fn third_func(num: i32) -> i32 {
  // 这个函数和 second 函数的作用是一样的，需要注意最后一行的 num，如果我不想写 return，还想
  // 让他返回，那可以直接写变量名，不加其他任何内容，当然也可以写一个表达式，例如 num + 1，
  // 这里不需要带分号
  // do something
	num
}
```

下面写一个有意义的函数示例，感受一下函数的使用

要求：在 main 函数中调用函数，函数主要功能为，接受一个无符号整数作为参数，并返回这个整数加1后的结果

```rust
// 1、首先，什么都不干，先搞定main
fn main() {
  // 3、调用函数
  let old_num: u32 = 100;
  let new_num = plus_one(old_num);
  println!("{}", new_num);
}

// 2、定义一个可以被 main 调用的函数，根据功能描述，我们这里叫做 plus_one，他需要接收一个参数，并返回参数+1
fn plus_one(num: u32) -> u32 {
  // 注：这里只是简单的示例，不考虑num溢出的情况

  // 下面两行都可以作为返回使用，这里先注释掉一行
  // num + 1
  return num + 1;
}
```

至于上面代码的运行结果，各位可以亲自动手试一下看看。

----

**Rust函数体中的语句和表达式**

因为Rust是基于表达式的语言，所以它将语句（statement）和表达式（expression）区分为两个不同的概念，下面我们来说一下他们之间的区别以及如何影响函数体的定义过程。

我们之前写过这么一条定义变量的代码，如下

```rust
let x = 1;
```

这就是一条语句，又例如

```rust
fn main() {}
```

这也是一条语句，那什么样的叫语句呢，要记住，**语句不会返回值**，例如上面的`let x = 1;`，我们不能将这句话赋值给另外一个变量，即`let y = let x = 1;`这样是错误的。由于`let x = 1;`没有返回值，所以变量y没有可以绑定的东西，这里和C有些区别，C的赋值语句会有所赋的值作为返回值，所以在C里面我可以使用`x = y = 1`这种写法，但是rust不允许。

和语句不同的表达式，会计算出来某个值作为结果。在Rust编写的大部分代码都是表达式。例如`1 + 2`，这是一个表达式，因为他会计算出来值3，这个3可以赋值给一个变量；又例如，前面的例子`let x = 1;`这里1就是一个表达式，他将值赋值给了x。

```rust
fn main() {
  let x = 5;
  
  let y = { // 从这个 { 到最近的 } 是一个代码块
    let x = 3;
    x + 1 // 注意这里没有加分号，所以会将x + 1计算的值给y，所以这里{}的代码块是一个表达式
  }
  
  println!("The value of y i : {}", y);
}
```

----

前面说了一堆函数的问题了，接下来再说一下注释，我们在前面写了很多注释，下面说一下注释的格式

```rust
// 两个斜线，以及这两条斜线所在的位置后面，直到行末都为注释内容，所以两条斜线又称为单行注释
let a = 1; // 可以写在行的适当位置，直到行末都是注释
// 也可以单独占据一行，就像第一个注释和这个注释一样
let b = 1;
```

注释的主要作用就是为了说明函数、变量代表了什么含义，做了什么等，可以让代码阅读者更快的理解代码的内容，当然，这得是写注释的人不在代码里下毒😄；并不是所有函数、变量都需要添加注释，事实上也没有一个很规范的、强制的内容说明这里必须加注释，那里不可以加注释，可以多看看代码学习其他人的良好编码习惯。

到这里应该告一段落了，接下来要讲控制流，主要作用就是可以帮助人按照逻辑去写出符合实际流程的代码（这句话完全是我自己的想法，不作为权威话语），学习了控制流之后，我们就可以用前面所学的代码解决一些基础的、入门的代码题，也可以完成一些简单的算法。

这篇就到这吧，说的挺多，实际内容很少，多多理解。



插点题外话，以下不重要，纯属个(yi)人(xiang)见(tian)解(kai)，写这些文章目的是为了记录，其实也是为了传播知识，Rust其实没有传说中的那么困难，就我个人感觉而言，大部分语言能做的rust都可以做，rust能做的其他语言也可以可以做，而且大部分基础操作都是一样的，例如循环、条件判断，再例如基础数据类型整数、布尔值、字符串等等，这些每个语言都是有的，为什么有些人会认为Rust会比较难呢，我认为有以下几点

1、再学习之前就被别人灌输了这个难的思想，导致看到某些没见过的内容，没见过的写法就会心生恐惧；

2、在已有其他语言基础情况下，再学习这个语言，某些语法上的区别，而且是写法较大的区别，让人一时转不过来弯，例如java（对于后面这个简单写法C也是）定义一个变量的时候`int a = 1`，javascript定义一个变量`let a = 1`，到了Rust这里就变成了`let a: i32 = 1`，java那边类型写前面，早期大部分语言类型都是这样写，js那边自由度比较高，弱类型的，所以不写也没关系（其实也没得写，到ts那会有类型限制），到了rust这里，类型就要写到变量后面，还要加个冒号，这就稍微有点头大了；不过习惯了Go的写法的朋友在看rust的变量定义的还是比较舒服的。我觉得像rust这种类型写在变量后面的方式已经是现在编程语言的一个标准写法的，像Typescript、go、kotlin等等语言都采用了这种形式，所以针对这一点可以多写写适应一下；

3、像我之前写java或者node的时候变量名就习惯了驼峰命名，在C那边用驼峰也没问题，但是到了这边，需要用蛇形（下划线）形式，我个人就觉得不习惯，有时候看起来就很头大（可能和之前学习C++那时候看这种下划线的全局变量、宏定义等等看的后遗症吧），所以我看到这种写法也会让我学习起来很难受。

4、说实话，rust的api文档刚开始看的时候，这TM是什么鬼，层级组织特别让人不好理解，而且也不方便，但是在之后因为项目中需要用到，没办法去仔细看了一些API的文档后，发现还是比较好的，可能这就是潮流吧😝，所以很多新人去查阅文档的时候一定要静下心来仔细阅读，读了几次之后就会得心应手。

哒哒哒的又是一堆废话，权当放松心情吧

