第一章

学习一门新的语言，了解这个语言优点、特性等，在这里引用一下([官网](https://www.rust-lang.org/zh-CN/))的介绍作为开篇

**一门赋予每个人 构建可靠且高效软件能力的语言,Rust 速度惊人且内存利用率极高。由于没有运行时和垃圾回收，它能够胜任对性能要求特别高的服务，可以在嵌入式设备上运行，还能轻松和其他语言集成。Rust 丰富的类型系统和所有权模型保证了内存安全和线程安全，让您在编译期就能够消除各种各样的错误,Rust 拥有出色的文档、友好的编译器和清晰的错误提示信息， 还集成了一流的工具——包管理器和构建工具， 智能地自动补全和类型检验的多编辑器支持， 以及自动格式化代码等等。**

一、（不知道些什么，就占个位置吧）

接下来常规步骤：1、安装；2、运行一个demo（hello world）

**1、安装**

i、如果使用的是linux 或 macOS，可以在终端执行下面这个命令

```shell
 # 官网复制的，地址是这个https://www.rust-lang.org/zh-CN/tools/install
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

上面命令在安装过程中，会将rust工具链添加到环境变量`PATH`里，并在下一次打开（登录）终端时候生效，如果不想重启终端但是想rust立即生效，可以执行下面的命令

```shell
source $HOME/.cargo/env
```

前面说过，安装过程中会自动添加到`PATH`变量里面，如果不放心，可以自己添加到`~/.bash_profile`里面，然后执行`source`命令需要添加的内容是下面这个：

```shell
export PATH="$HOME/.cargo/bin:$PATH"
```

**注意：**为了正常编译Rust代码，需要一个链接器，系统有可能已经有了，如果没有，可以自己安装一个C语言的编译器，一般都会附带一个链接器，可以查询当前平台文档来安装一个C语言编译器，这里不作为本文的重点，请自行查阅相关文档。

ii、如果是windows环境，可以去Rust官网[安装](https://www.rust-lang.org/zh-CN/tools/install)页面，因为我用的macOS，手里暂时没有windows的系统，而且看了一下官网的说明，官方提供msi的安装文件，可以根据自己系统去下载，还是比较简单的，这里就不做详细说明了。

**以下如果用到终端命令，基本以macOS、linux环境下执行结果，不过大部分命令windows也支持**

常用的命令

```shell
rustup update # 更新
rustup self uninstall # 卸载rustup以及Rust工具链
rustc --version # 查看rust版本
```

**2、运行一个demo**

国际惯例，别管这个语言有多难，第一个运行的代码片段`Hello world!`

①、先建立一个文件夹，右键创建也行，linux、macOS通过命令mkdir也可以，开心就好。文件夹名称叫做。。。`hello_world`吧，总得有个代表着本程序重大意义的名字

②、进入到文件夹中，创建一个文件，这里创建的文件应该以`rs`作为扩展名，例如`hello_world.rs`(这里就用这个做名字吧，O(∩_∩)O)；

③、打开前面创建的`hello_world.rs`文件，然后在文件中输入下面这段代码，代码每一行的意思这里就不做解释了，没有编程基础的可以稍后在相关地方看到每一部分的代码的介绍，有编程基础的，这点代码简简单单啦~

```rust
fn main(){
  println!("Hello world!");
}
```

④、接下来打开终端，windows用powershell也可以，cmd也可以，看个人习惯了，在终端执行命令中如果带有路径，需要注意`\`而不是`/`,输入完下面命令，如果没有错误的话应该是没有任何输出的（没有消息就是最好的消息）

```shell
rustc hello_world.rs # 这行是编译rust源码文件的，类似于java之前版本（现在出的15、17都合成到一个命令了）javac；clang的gcc等，如果不知道其他语言，这里就记住，rustc是编译rust文件的命令
```

⑤、上面`rustc`正确执行过后，会在同目录下生成一个名称为`hello_world`的可执行文件，windows可能会在末尾增加了exe的扩展名，接下来linux、macOS可以使用`./hello_world`去执行，windows`.\hello_world.exe`然后就可以看到熟悉的`Hello world!`信息了。

至此，一个简单、经典、（此处省略n多个词）的rust程序就完成了

恭喜你已经入门rust了，哈哈哈哈~~

接下来对上面的代码说明一下`fn main(){}`这个是rust整个程序的一个入口，基本上没有特殊情况就这样写就可以成功的启动一个rust程序，写rust代码什么都不干，先把这个写好。

接下来的输出语句`println!("Hello world!");`前面说了main作为程序的入口，进入程序之后要干一件事，就是输出一句`Hello world!`，这里`println!`是一个宏命令，他的作用类似于java中的`System.out.println("Hello....")`,至于这里的宏是什么意思，可以等到后续的篇章介绍，还是比较方便的一个东西，这里先记住输出写法。

**注：**有些代码或者命令我会添加java或者c的写法，方便有相关语言基础的人理解（其实也就前期比较好些的时候，后面可能就懒了就不写了，不过那时候应该相关语言的开发者应该能对rust有一定的基础了）

好了，到这里环境安装好了、基础示例也写了，踏出了学习Rust的第一步，到这里一切都是那么的简单、顺利，当然了，偶尔我话多一点，可以迅速略过就好了，在这一一小段内容的最后，再来复习一遍代码

```rust
fn main() { // ①程序入口
  println!("Hello world!"); // ②输出一句话
}
```



二、

前面通过手动创建文件夹、rust源码文件，然后手动去编译(`rustc`)、执行(`./hello_world`)，这里介绍一个以后常用的方式去建立运行代码。

在前面安装rust的时候，会自动的添加`cargo`这个工具，这个工具可以帮助我们方便的创建基本的项目框子，在某个目录下使用方式如下命令

```shell
cargo new hello_world # 这里注意，因为创建的是hello_world文件夹，所以同目录下不要有同名的，意思就是说。。。不要在前面创建文件夹的相同目录下再次创建一个叫hello_world的文件夹
```

这个通过cargo命令的new行为，创建了一个名为hello_world，这个文件夹下面包含了

```
.
├── Cargo.toml
└── src
    └── main.rs
```

`Cargo.toml`这个文件里面主要有有对项目的描述信息，对第三方（rust肯定很多东西要用到别人写好的，自己去写就头大了）或者官方的包引用声明，这个文件内容也比较简单，可以自行查阅文档（大部分就类似于配置的作用了，所以可以了解里面的一些配置的作用），这个文件相当于Node程序中的`package.json`文件，不知道node也没关系，前面的解释也够了。

`src`咱们要写的rust的源代码都扔在这里面就好了，这里可以看到通过`cargo new`命令，这里已经默认创建了一个`main.rs`文件，这个文件也默认创建了一段如下的代码，基本和前面写的是一样的（为什么是基本的，标点符号我前面就没写）

```rust
fn main() {
    println!("Hello, world!");
}
```

创建好之后，可以通过下面介绍的命令去得到想要的结果

```shell
# 在前面创建的hello_world文件夹下执行
# 这个就相当于前面的rustc 命令，如果有错误会有比较详细的提示信息，如果没错误，也有正确的输出
# 执行成功后，在项目根目录下，会多一个target文件夹，这个和java很像，不过不用管它，里面都是生成的文件
cargo build 
```

前面编译之后没有问题，就可以运行了，现在可以有两种方式，都写在下面了，如果想法没有很奇怪的话，肯定不会选择复杂的运行的方式

```shell
# 第一种
./target/debug/hello_world # target是前面通过build生成的，所以这里就执行好了

# 第二种
cargo run # 这个命令会帮助我们自动执行target下的那个可执行文件，相信大部分人都会选择这个吧
```

通过上面两种方式运行代码，都可以获得我们熟悉的`hello world`内容的输出，如果使用第二种的话，有这么一个场景：写完代码，没有执行`cargo build`，直接执行`cargo run`，这个时候他会自动的将build执行，然后再执行run，所以为了省事，直接执行`cargo run`吧。

我们在写代码的时候，如果项目比较大了，使用build命令会比较慢，这个时候我们可以使用`cargo check`命令，这个命令跳过了生成可执行文件的过程，只是检查语法对不对，所以速度会比build快很多。

cargo内容的最后，如果想要发布一个release版本的内容，可以在build后面增加`--release`参数，即`cargo build --release`这个命令会执行的时间更长，因为在编译过程中，会进行代码的优化，这个命令执行后，会在target的release文件夹下生成可执行文件。